<h1><?= $dataset->title ?></h1>
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <?= $this->partial('mkdf/datasets/partial/dataset-features', ['features' => $features, 'dataset_id' => $dataset->id] ) ?>
        </div>
        <div class="col-md-9">
            <h2>Ownership and licensing</h2>
            <?= $this->partial('mkdf/core/partial/actions', $actions); ?>

            <div class="card">
                <div class="card-header">
                    Ownership
                </div>
                <div class="card-body">
                    Ownership details
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Licensing
                </div>
                <div class="card-body">
                    <?php if (count($licences) > 0): ?>
                        <table class="table table-bordered">
                            <?php foreach ($licences as $licence) : ?>
                                <tr>
                                    <td><?= $this->escapeHtml($licence['name']) ?></td>
                                    <td><?= $this->escapeHtml($licence['description']) ?></td>
                                    <?php
                                        $url = $this->url( 'dataset', ['action' => 'licenceDelete', 'id' => $dataset->id], [query => ['licence_id' => $licence['id']]]  );
                                        print ("<td><a class='btn btn-sm btn-danger' href='".$url."'><i class='fas fa-trash-alt'></i></a></td>");
                                    ?>
                                </tr>
                            <?php endforeach; ?>
                        </table>
                    <?php else: ?>
                        <em>No licence information has been assigned to this dataset.</em>
                    <?php endif; ?>



                    <script>
                        $(document).ready(function() {
                            $("#inputLicence").autocomplete({
                                //source: ["here", "are", "some", "licences"]
                                source: <?= json_encode($licenceList) ?>
                            });
                        });
                    </script>
                    <form name="addLicenceForm" id="addLicenceForm" method="POST" action="<?=$this->url( 'dataset', ['action' => 'licenceAdd', 'id' => $dataset->id]); ?>">
                        <div class="form-group">
                            <label for="inputLicence">Add a new licence for this dataset</label>
                            <input type="text" class="form-control" name="inputLicence" id="inputLicence" placeholder="Enter licence name...">
                        </div>
                        <div class="form-group">
                            <input type="submit" name="submit" class="btn btn-primary" value="Add">
                        </div>
                    </form>

                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    Attribution
                </div>
                <div class="card-body">
                    <?= $attribution[0]['value'] ?>
                </div>
            </div>
        </div>
    </div>
</div>
