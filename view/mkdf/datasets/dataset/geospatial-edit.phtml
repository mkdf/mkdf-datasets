<h1><?= $dataset->title ?></h1>
<?= $this->partial('mkdf/core/partial/messages', ['messages' => $messages] ) ?>
<div class="container">
    <div class="row">
        <div class="col-md-3">
            <?= $this->partial('mkdf/datasets/partial/dataset-features', ['features' => $features, 'dataset_id' => $dataset_id] ) ?>
        </div>
        <div class="col-md-9">
            <h2>Location - edit</h2>
            <p>
                <em>Enter the dataset coordinates below or click a location on the map. The location can be fine-tuned by
                zooming in on the map and dragging the map pin.</em>
            </p>
            <?php
            $form = $this->form;

            $form->get('latitude')->setAttributes([
                'class'=>'form-control',
                'placeholder'=>'Latitude'
            ]);

            $form->get('longitude')->setAttributes([
                'class'=>'form-control',
                'placeholder'=>'Longitude'
            ]);

            $form->get('update')->setAttributes(['class'=>'btn btn-primary']);

            $form->prepare();
            ?>

            <?= $this->form()->openTag($form); ?>
            <div class="form-group">
                <?= $this->formLabel($form->get('latitude')); ?>
                <?= $this->formElement($form->get('latitude')); ?>
                <?= $this->formElementErrors($form->get('latitude')); ?>
            </div>
            <div class="form-group">
                <?= $this->formLabel($form->get('longitude')); ?>
                <?= $this->formElement($form->get('longitude')); ?>
                <?= $this->formElementErrors($form->get('longitude')); ?>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="container-fluid m-0 p-0" id="map" style="height: 400px; width: 100%; padding:0"></div>
                </div>
            </div>

            <div class="form-group">
                <?= $this->formElement($form->get('update')); ?>
            </div>
            <?= $this->form()->closeTag(); ?>



        </div>
    </div>
</div>
<script language="JavaScript">
    var datasetID = <?= $dataset_id; ?>;
</script>
<?= $this->inlineScript()->appendFile($this->basePath('js/dataset-location-picker.js')); ?>



