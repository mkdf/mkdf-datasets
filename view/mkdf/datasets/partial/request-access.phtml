<?php
    $query = "";
    $formAction = $this->url( 'dataset', ['action' => 'send-access-request', 'id' => $dataset->id], ['query' => $query]  );
    $checkedSoFar = false;
?>
<form method="POST" action="<?= $formAction ?>">
    <div class="form-group">
        <label for="accessLevel">Select the level of access required</label>
        <div class="form-check">
            <?php
                $disabled = "";
                $checked = "";
                if ($myPermissions['read']) {
                    $disabled = "disabled";
                }
                elseif (!$checkedSoFar) {
                    $checked = "checked";
                    $checkedSoFar = true;
                }
            ?>

            <input class="form-check-input" type="radio" name="accessLevel" id="accessLevel1" value="READ" <?= $checked ?> <?= $disabled ?>>
            <label class="form-check-label" for="accessLevel1">
                Read
            </label>
        </div>
        <div class="form-check">
            <?php
                $disabled = "";
                $checked = "";
                if ($myPermissions['write']) {
                    $disabled = "disabled";
                }
                elseif (!$checkedSoFar) {
                    $checked = "checked";
                    $checkedSoFar = true;
                }
            ?>
            <input class="form-check-input" type="radio" name="accessLevel" id="accessLevel2" value="WRITE" <?= $checked ?> <?= $disabled ?>>
            <label class="form-check-label" for="accessLevel2">
                Write
            </label>
        </div>
        <div class="form-check">
            <?php
                $disabled = "";
                $checked = "";
                if ($myPermissions['read'] && $myPermissions['write']) {
                    $disabled = "disabled";
                }
                elseif (!$checkedSoFar) {
                    $checked = "checked";
                    $checkedSoFar = true;
                }
            ?>
            <input class="form-check-input" type="radio" name="accessLevel" id="accessLevel2" value="READWRITE" <?= $checked ?> <?= $disabled ?>>
            <label class="form-check-label" for="accessLevel2">
                Read/Write
            </label>
        </div>
        <div class="form-check disabled">
            <?php
                $disabled = "";
                $checked = "";
                if ($myPermissions['manage']) {
                    $disabled = "disabled";
                }
                elseif (!$checkedSoFar) {
                    $checked = "checked";
                    $checkedSoFar = true;
                }
            ?>
            <input class="form-check-input" type="radio" name="accessLevel" id="accessLevel3" value="MANAGE" <?= $checked ?> <?= $disabled ?>>
            <label class="form-check-label" for="accessLevel3">
                Manage
            </label>
        </div>
    </div>
    <div class="form-group">
        <label for="description">Please provide a brief description of why you are requesting this access.</label>
        <textarea class="form-control" id="description" name="description" rows="4"></textarea>
    </div>
    <div class="form-group">
        <button class="btn btn-primary" name="submit"><i class="fas fa-user-lock"></i> Request access</button>
    </div>
</form>
